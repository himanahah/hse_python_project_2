# Групповой проект №2: Сбор и анализ данных музыкальной индустрии

## Общая информация
Проект выполнен командой из 4 студентов второго курса программы "Бизнес-информатика" НИУ ВШЭ. [1]
Мы собрали и интегрировали данные о популярности артистов и треках из источников Spotify (API) и Genius/Hitmotop (скрапинг), фокусируясь на бизнес-задаче анализа факторов успеха в стриминговой музыке. [2][3]
Дата выдачи: 21.10.2025; защита: 12.11.2025.   

## Бизнес-задача и обоснование
### Формулировка задачи
Создать следующую глобальную музыкальную звезду через data-driven подход: выявить формулу успеха топ-артистов и найти/развить недооценённых кандидатов, соответствующих этой модели по средствам портретного анализа артиста соответствующей категории.
Целевая переменная — популярность (popularity из Spotify API, в диапазоне 0-100), которая отражает охват аудитории.
Текстовый столбец — жанры артистов (genres) и лейблы (Labels).

### Обоснование
В музыкальной индустрии популярность напрямую влияет на доходы от стримов (миллиарды долларов ежегодно).
Анализ позволит выявить, как жанры, ежедневные стримы (Daily Streams) и месячные слушатели (Monthly Listeners) предсказывают успех, помогая платформе снижать отток пользователей на 15-20% через targeted рекомендации.
Данные из двух источников обеспечивают полноту: API дает структурированные метрики, скрапинг — динамические чарты и лейблы для интеграции.

## Источники данных
### Сбор через API (Spotify)
Использовали Spotify API (Web API v2) с авторизацией через OAuth (API-ключ из Spotify for Developers). [2][3]
Запросы:  
1. /artists — метрики артистов (followers, popularity, genres).  
2. /artists/{id}/top-tracks — топ-треки с duration_ms и popularity.  
3. /search — поиск по имени артиста для ID.  
4. /audio-features — аудио-характеристики (не включены в датасет, но использованы для валидации).  
5. /artists/{id} — детальная информация о жанрах и популярности.  
Собрано >1000 записей артистов и треков; пример: Drake с popularity=88. 
Код в spotify_api_scraper.py с обработкой rate limits.

### Сбор через скрапинг (Genius и Hitmotop)
Скрапинг сайтов Genius.com (тексты песен, жанры) и Hitmotop.com (чарты популярности).   
Инструменты: Selenium для динамического контента (имитация пользователя: скролл, клики по пагинации), BeautifulSoup для парсинга HTML.   
- Genius: Парсинг страниц артистов (URL: /artists/{name}) — извлечение genres, total_page_views как proxy для вовлеченности. >10 000 записей.   
- Hitmotop: Парсинг чартов (URL: /top100) — позиции треков, артисты, для обогащения метрик. >9 млн символов данных. [1]
Очистка: Регулярные выражения для удаления HTML-тегов и спецсимволов (re.sub(r'<.*?>', '', text)).   
Код в genius_scraper.py и hitmotop_scraper.py; dataset >10 000 записей (merged_genius_hitmotop.csv).

### Интеграция данных
Объединение по ключу "artist" в final_merged_artists.csv: Spotify метрики + скрапинг (genres, views).
Дополнительно: art_labels.csv — лейблы из скрапинга (например, Drake: "OVO Sound/Republic").
Логирование: В label.log — уровни INFO/ERROR для ошибок API и скрапинга (настроено через logging.config).

## Разведочный анализ данных (EDA)
### Обработка данных
- Пропуски: 15% в genres (NaN — обработаны fillna('Unknown')); доля низкая, гипотеза: отсутствие жанров для нишевых артистов. [4]
- Ошибки: Отрицательные значения отсутствуют; обработка via pd.to_numeric(errors='coerce').
- Выбросы: Daily Streams >10M (top 1%) — оставлены, как индикатор хитов (Drake: 9,898.1).
Очистка текстов: Частотный анализ genres (Counter: 'pop' — 25%, 'hip hop' — 18%).

### Анализ признаков
- Распределение: Popularity коррелирует с Monthly Listeners (r=0.85); визуализация: scatter plot в EDA.ipynb. [4][2]
- Связь с таргетом: Жанры 'pop' повышают popularity на 12% (pivot_table).
- Корреляции: Heatmap — Daily Streams vs total_page_views (r=0.72).
Сводные таблицы: Топ-10 артистов по стримами (U2: 9,761.9; Rammstein: 11,842,757 followers).
Графики: Bar plot жанров vs средняя popularity; histogram duration_ms (среднее 200s для хитов).

### Выводы из EDA
Популярность растет с разнообразием жанров (>2 — +20% к стримами), но нишевые (industrial metal) имеют лояльную аудиторию (высокие views).
Бизнес-инсайт: Рекомендовать продвижение 'pop-hip hop' гибридов; обработка пропусков genres улучшит модели предсказания на 10%.
Данные разрежены на 5% (пропуски), но достаточны для ML (регрессия popularity).

## Структура репозитория
- **scrapers/**: spotify_api_scraper.py (API), genius_scraper.py (Selenium+BS4), hitmotop_scraper.py.
- **data/**: CSV-файлы (final_merged_artists.csv — 268k символов; genius.csv — 4.8M).
- **notebooks/**: EDA.ipynb (анализ, визуализации с matplotlib/seaborn).  
- **logs/**: label.log (логи сбора лейблов).
- **.gitignore**: Игнор __pycache__, *.log (кроме label.log), больших CSV (>10MB).  
- README.md: Это описание.
Коммиты: Осмысленные (e.g., "feat: add selenium for dynamic pages"), ветвление по gitflow (main, develop, feature/scraper).

## Артефакты
- Скрипты сбора: >5 запросов API, >10k записей скрапинга.  
- EDA: Обработка пропусков/выбросов, корреляции, графики.  
- Логи: Включены для debugging (уровень DEBUG в config).  
- Выводы: Инсайты для бизнеса, готово к ML.  

## Самооценка по критериям
| Критерий | Описание | Заработанные баллы | Обоснование |
|----------|----------|---------------------|-------------|
| 1. Выбор задачи и EDA | Обоснованность бизнес-задачи, полнота EDA, инсайты | 3.5 | Задача релевантна (анализ популярности для стриминга), EDA полный (пропуски, корреляции, визуализации, бизнес-выводы). |
| 2. GitHub | Использование СКВ, файлы, коммиты | 1.0 | .gitignore, README, gitflow, осмысленные коммиты; репозиторий структурирован.|
| 3. Инструменты извлечения данных | API+скрапинг, логи, Selenium, доп. инструменты | 5.5 | API (5+ запросов с ключом), скрапинг (>10k записей, BS4+Selenium), логи (label.log), регексы; доп: OAuth, rate limits.|
| **Итого** | | **10.0** | Полное соответствие; бонусы за сложность (Selenium+логи). |

